<main style="font-family: sans-serif; padding: 10px; margin-bottom: 80px;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
    <h1 style="margin: 0; color: #333; font-size: 1.5rem;">FinanÃ§as ğŸ’°</h1>
    
    <div style="background: white; padding: 8px 12px; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.05); border: 1px solid #e0e0e0;">
      <input type="month" [(ngModel)]="mesAnoSelecionado" (ngModelChange)="filtrarPorMes()" 
             style="border: none; font-family: inherit; font-size: 0.9rem; cursor: pointer; background: transparent; outline: none; font-weight: bold;">
    </div>
  </div>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-bottom: 20px;">
    <div style="padding: 12px; border-radius: 8px; background: #e8f5e9; border: 1px solid #4caf50;">
      <h4 style="margin: 0; color: #2e7d32; font-size: 0.8rem;">Receitas</h4>
      <h3 style="margin: 5px 0 0 0; color: #1b5e20; font-size: 1.1rem;">{{ totalReceitas | currency:'BRL' }}</h3>
    </div>

    <div style="padding: 12px; border-radius: 8px; background: #ffebee; border: 1px solid #f44336;">
      <h4 style="margin: 0; color: #c62828; font-size: 0.8rem;">Despesas</h4>
      <h3 style="margin: 5px 0 0 0; color: #b71c1c; font-size: 1.1rem;">{{ totalDespesas | currency:'BRL' }}</h3>
    </div>

    <div style="padding: 12px; border-radius: 8px; background: #e3f2fd; border: 1px solid #2196f3;">
      <h4 style="margin: 0; color: #1565c0; font-size: 0.8rem;">Saldo</h4>
      <h3 style="margin: 5px 0 0 0; color: #0d47a1; font-size: 1.1rem;">{{ saldoGeral | currency:'BRL' }}</h3>
    </div>
  </div>

  <div style="background: #ffffff; padding: 15px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #e0e0e0;">
    <h3 style="margin: 0 0 15px 0; color: #424242; font-size: 1rem; text-align: center;">ğŸ• Gastos por Categoria</h3>
    <div style="position: relative; height: 250px; width: 100%;">
      <canvas id="canvasCategorias"></canvas>
    </div>
  </div>

  <div style="background: #e9ecef; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 12px 0; font-size: 1rem;">Novo LanÃ§amento</h3>
    <div style="display: flex; flex-direction: column; gap: 10px;">
      <input type="text" placeholder="DescriÃ§Ã£o" [(ngModel)]="novaTransacao.descricao" style="padding: 10px; border: 1px solid #ccc; border-radius: 6px;">
      <div style="display: flex; gap: 10px;">
        <input type="number" placeholder="Valor" [(ngModel)]="novaTransacao.valor" style="flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 6px;">
        <select [(ngModel)]="novaTransacao.tipo" style="padding: 10px; border: 1px solid #ccc; border-radius: 6px;">
          <option value="despesa">Despesa</option>
          <option value="receita">Receita</option>
        </select>
      </div>
      <button (click)="adicionarTransacao()" style="padding: 12px; background: #28a745; color: white; border: none; border-radius: 6px; font-weight: bold;">Salvar</button>
    </div>
  </div>

  <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px dashed #2196f3;">
    <h3 style="margin: 0 0 10px 0; font-size: 1rem; color: #0d47a1;">ğŸ“¥ Importar CSV</h3>
    <input type="file" accept=".csv" (change)="onFileSelected($event)" style="width: 100%; margin-bottom: 10px; font-size: 0.8rem;">
    <button (click)="importarArquivo()" [disabled]="!arquivoSelecionado" style="width: 100%; padding: 10px; background: #0d47a1; color: white; border: none; border-radius: 6px; font-weight: bold;">Importar Dados</button>
  </div>

  <div style="background: #f4f4f4; padding: 10px; border-radius: 8px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
      <h3 style="margin: 0; font-size: 1rem;">ğŸ“‹ Lista</h3>
      <select [(ngModel)]="categoriaSelecionada" (ngModelChange)="mudarCategoria()" style="padding: 5px; border-radius: 6px; max-width: 150px;">
        <option value="Todas">Todas</option>
        @for (cat of categoriasDisponiveis; track cat) { <option [value]="cat">{{ cat }}</option> }
      </select>
    </div>
    
    <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px;">
      @for (t of transacoesFiltradas; track t.id) {
        <li style="background: white; padding: 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border-left: 5px solid;" [style.border-left-color]="t.tipo === 'receita' ? '#4caf50' : '#f44336'">
          <div style="display: flex; flex-direction: column; max-width: 60%;">
            <span style="font-weight: 500; font-size: 0.95rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{ t.descricao }}</span>
            <small style="color: #888; font-size: 0.75rem;">{{ t.data_transacao | date:'dd/MM' }} â€¢ {{ t.categoria }}</small>
          </div>
          <div style="display: flex; align-items: center; gap: 10px;">
            <span [style.color]="t.tipo === 'receita' ? '#2e7d32' : '#c62828'" style="font-weight: bold; font-size: 0.9rem;">
              {{ t.valor | currency:'BRL' }}
            </span>
            <button (click)="excluirTransacao(t.id)" style="background: #ffebee; border: none; padding: 5px; border-radius: 4px; color: #f44336;">ğŸ—‘ï¸</button>
          </div>
        </li>
      }
    </ul>

    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
      <button (click)="paginaAnterior()" [disabled]="paginaAtual === 1" style="padding: 8px;">â¬…ï¸</button>
      <span style="font-size: 0.8rem;">{{ paginaAtual }}/{{ totalPaginas }}</span>
      <button (click)="proximaPagina()" [disabled]="paginaAtual === totalPaginas" style="padding: 8px;">â¡ï¸</button>
    </div>
  </div>
</main>